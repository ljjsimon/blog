---
title: tmp目录文件莫名消失及后续
date: 2018-06-28 18:08:08
tags: 运维
id: 1530180519
---
有一个 WorkerMan 程序，会把 pid 放在 /tmp 目录下，过一段时间不知道为什么这个文件就消失了，然后命令行的控制都不起作用了。网上查了之后知道 linux 系统除了用户的 crontab 外，还有一些定时任务 /etc/cron.* 系列目录下。一一查看之后没有发现这样的程序，但 pid 文件是不能 /tmp 下了。跟运维沟通后得知 linux 有个专门放 pid 文件的目录是 /var/run。

改完程序后还不能重启进程，最好可以 reload。从运维那里得知一般程序 reload 可以用
```sh
kill -HUP pid
```
这个命令。试了以后发现不行，主程序被杀死了，子程序也只更新了一部分。看程序里面用的是 SIGUSR1 这个信号，即要执行
```sh
kill -USR1 pid
```
USR1 信号是程序自定义的信号，至于 WorkerMan 收到这个信号执行了什么，就是另一篇文章的事了。

**所以这里给出结论：SIGHUP 信号的解释是挂起，大多数服务器进程都会进行复位操作并重新加载配置文件。但不适用我们自己写的程序。**